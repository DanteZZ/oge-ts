{"version":3,"file":"camera.js","sourceRoot":"","sources":["../../../src/modules/camera.ts"],"names":[],"mappings":"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","sourcesContent":["import { Canvas } from \"../shared/Canvas\";\nimport { Scene } from \"./scene\";\n\nimport { GameObject } from \"../shared/GameObject\";\n\nexport class Camera {\n  public name: string | null = null;\n  public width: number = 0;\n  public height: number = 0;\n  public x: number = 0;\n  public y: number = 0;\n  public trackInstance?: GameObject;\n  private scene: Scene;\n\n  constructor(scene: Scene, trackInstance?: GameObject) {\n    this.scene = scene;\n    this.trackInstance = trackInstance;\n  }\n\n  public update(canvas: Canvas): void {\n    let w = 0;\n    let h = 0;\n    if (this.width) {\n      w = this.width;\n    } else {\n      w = window.innerWidth;\n    }\n    if (this.height) {\n      h = this.height;\n    } else {\n      h = window.innerHeight;\n    }\n    canvas.setSize(w, h);\n\n    if (this.trackInstance) {\n      this.x = this.trackInstance.x - Math.ceil(w / 2 / canvas.scale);\n      this.y = this.trackInstance.y - Math.ceil(h / 2 / canvas.scale);\n    }\n\n    if (this.x < 0) {\n      this.x = 0;\n    }\n    if (this.y < 0) {\n      this.y = 0;\n    }\n\n    w = Math.ceil(w / canvas.scale);\n    h = Math.ceil(h / canvas.scale);\n\n    if (this.x + w > this.scene.width) {\n      this.x = this.scene.width - w;\n    }\n    if (this.y + h > this.scene.height) {\n      this.y = this.scene.height - h;\n    }\n\n    if (w > this.scene.width) {\n      this.x = -(w - this.scene.width) / 2;\n    }\n    if (h > this.scene.height) {\n      this.y = -(h - this.scene.height) / 2;\n    }\n    canvas.setOffset(this.x, this.y);\n  }\n\n  public setName(name: string): void {\n    this.name = name;\n  }\n\n  public setScene(scene: Scene): void {\n    this.scene = scene;\n  }\n\n  public setTrackInstance(trackInstance: GameObject): void {\n    this.trackInstance = trackInstance;\n  }\n}\n"]}