{"version":3,"file":"Canvas.js","sourceRoot":"","sources":["../../../src/shared/Canvas.ts"],"names":[],"mappings":"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","sourcesContent":["import { iCanvasItem, iRectInfo, iTextInfo } from \"../interfaces/graphic\";\nimport { iImageInfo } from \"../interfaces/graphic\";\nimport { AssetPattern } from \"../utils/assets\";\n\nexport class Canvas implements iCanvasItem {\n  public name: string;\n  public element: HTMLCanvasElement;\n  public ctx: CanvasRenderingContext2D;\n  public offsetX: number;\n  public offsetY: number;\n  public scale: number = 1;\n  constructor(\n    rootElement: HTMLElement,\n    name: string,\n    width?: number,\n    height?: number\n  ) {\n    const canvasElement = document.createElement(\"canvas\");\n    canvasElement.style.position = \"absolute\";\n    canvasElement.style.top = \"0px\";\n    canvasElement.style.left = \"0px\";\n    canvasElement.className = \"_oge_canvas\";\n    const ctx = canvasElement.getContext(\"2d\");\n    if (!ctx) {\n      throw new Error(\"Can't create 2d context\");\n    }\n    this.ctx = ctx;\n    this.name = name;\n    this.element = canvasElement;\n\n    this.offsetX = 0;\n    this.offsetY = 0;\n    this.setSize(width, height);\n    rootElement.appendChild(this.element);\n  }\n  public drawAsset(info: iImageInfo) {\n    const ctx = this.ctx;\n    if (ctx) {\n      const imageSource = info.asset.getResource();\n\n      if (imageSource instanceof HTMLImageElement) {\n        const sWidth: number = info.sWidth || imageSource.width;\n        const sHeight: number = info.sHeight || imageSource.height;\n        const dWidth: number = info.dWidth || imageSource.width;\n        const dHeight: number = info.dHeight || imageSource.height;\n\n        if (info.rotation) {\n          ctx.save();\n          ctx.translate(\n            Math.ceil((info.x - this.offsetX + dWidth / 2) * this.scale),\n            Math.ceil((info.y - this.offsetY + dHeight / 2) * this.scale)\n          );\n          ctx.rotate((info.rotation * Math.PI) / 180);\n          ctx.translate(\n            -Math.ceil((info.x - this.offsetX + dWidth / 2) * this.scale),\n            -Math.ceil((info.y - this.offsetY + dHeight / 2) * this.scale)\n          );\n        }\n\n        if (info.filter) {\n          ctx.save();\n          ctx.filter = info.filter;\n        }\n\n        if (info.opacity !== 1) {\n          ctx.save();\n          ctx.globalAlpha = info.opacity || 1;\n        }\n\n        ctx.drawImage(\n          imageSource,\n          info.offsetX || 0,\n          info.offsetY || 0,\n          sWidth,\n          sHeight,\n          Math.ceil((info.x - (this.offsetX || 0)) * this.scale),\n          Math.ceil((info.y - (this.offsetY || 0)) * this.scale),\n          Math.ceil(dWidth * this.scale),\n          Math.ceil(dHeight * this.scale)\n        );\n        if (info.rotation) {\n          ctx.restore();\n        }\n        if (info.opacity !== 1) {\n          ctx.restore();\n          ctx.globalAlpha = 1;\n        }\n        if (info.filter) {\n          ctx.restore();\n          ctx.filter = \"\";\n        }\n      }\n    }\n  }\n\n  public drawRect(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    info: iRectInfo = { strokeOnly: false, stroked: false, fixed: false }\n  ) {\n    const ctx = this.ctx;\n    if (ctx) {\n      let lastStrokeStyle: string | CanvasGradient | CanvasPattern = \"\";\n      let lastFillStyle: string | CanvasGradient | CanvasPattern = \"\";\n\n      const fillStyle =\n        info.fillStyle instanceof AssetPattern\n          ? info.fillStyle.getPattern()\n          : info.fillStyle;\n\n      const strokeStyle =\n        info.strokeStyle instanceof AssetPattern\n          ? info.strokeStyle.getPattern()\n          : info.strokeStyle;\n\n      if (strokeStyle) {\n        lastStrokeStyle = ctx.strokeStyle;\n        ctx.strokeStyle = strokeStyle;\n      }\n      if (fillStyle) {\n        lastFillStyle = ctx.fillStyle;\n        ctx.fillStyle = fillStyle;\n      }\n\n      const offsetX = info.fixed ? 0 : this.offsetX;\n      const offsetY = info.fixed ? 0 : this.offsetY;\n\n      if (!info.strokeOnly) {\n        ctx.fillRect(\n          Math.ceil((x - offsetX) * this.scale),\n          Math.ceil((y - offsetY) * this.scale),\n          Math.ceil(width * this.scale),\n          Math.ceil(height * this.scale)\n        );\n      }\n      if (info.stroked || info.strokeOnly) {\n        ctx.strokeRect(\n          Math.ceil((x - offsetX) * this.scale),\n          Math.ceil((y - offsetY) * this.scale),\n          Math.ceil(width * this.scale),\n          Math.ceil(height * this.scale)\n        );\n      }\n\n      if (info.strokeStyle) {\n        ctx.strokeStyle = lastStrokeStyle;\n      }\n      if (info.fillStyle) {\n        ctx.fillStyle = lastFillStyle;\n      }\n    }\n  }\n\n  public drawArc(\n    x: number,\n    y: number,\n    radius: number,\n    startAngle: number = 0,\n    endAngle: number = 2 * Math.PI,\n    info: iRectInfo = { strokeOnly: false, stroked: false, fixed: false }\n  ) {\n    const ctx = this.ctx;\n    if (ctx) {\n      let lastStrokeStyle: string | CanvasGradient | CanvasPattern = \"\";\n      let lastFillStyle: string | CanvasGradient | CanvasPattern = \"\";\n\n      const fillStyle =\n        info.fillStyle instanceof AssetPattern\n          ? info.fillStyle.getPattern()\n          : info.fillStyle;\n\n      const strokeStyle =\n        info.strokeStyle instanceof AssetPattern\n          ? info.strokeStyle.getPattern()\n          : info.strokeStyle;\n\n      if (strokeStyle) {\n        lastStrokeStyle = ctx.strokeStyle;\n        ctx.strokeStyle = strokeStyle;\n      }\n      if (fillStyle) {\n        lastFillStyle = ctx.fillStyle;\n        ctx.fillStyle = fillStyle;\n      }\n\n      const offsetX = info.fixed ? 0 : this.offsetX;\n      const offsetY = info.fixed ? 0 : this.offsetY;\n      ctx.beginPath();\n      ctx.arc(\n        Math.ceil((x - offsetX) * this.scale),\n        Math.ceil((y - offsetY) * this.scale),\n        Math.ceil(radius * this.scale),\n        startAngle,\n        endAngle\n      );\n      if (!info.strokeOnly) {\n        ctx.fill();\n      }\n      if (info.stroked || info.strokeOnly) {\n        ctx.stroke();\n      }\n\n      if (info.strokeStyle) {\n        ctx.strokeStyle = lastStrokeStyle;\n      }\n      if (info.fillStyle) {\n        ctx.fillStyle = lastFillStyle;\n      }\n    }\n  }\n\n  public drawText(\n    text: string,\n    x: number,\n    y: number,\n    info: iTextInfo = { strokeOnly: false, stroked: false, fixed: false }\n  ) {\n    const ctx = this.ctx;\n    if (ctx) {\n      let lastStrokeStyle: string | CanvasGradient | CanvasPattern = \"\";\n      let lastFillStyle: string | CanvasGradient | CanvasPattern = \"\";\n      let lastFont: string = \"\";\n      let lastTextAlign: CanvasTextAlign = \"left\";\n\n      const fillStyle =\n        info.fillStyle instanceof AssetPattern\n          ? info.fillStyle.getPattern()\n          : info.fillStyle;\n\n      const strokeStyle =\n        info.strokeStyle instanceof AssetPattern\n          ? info.strokeStyle.getPattern()\n          : info.strokeStyle;\n\n      if (strokeStyle) {\n        lastStrokeStyle = ctx.strokeStyle;\n        ctx.strokeStyle = strokeStyle;\n      }\n      if (fillStyle) {\n        lastFillStyle = ctx.fillStyle;\n        ctx.fillStyle = fillStyle;\n      }\n\n      if (info.font) {\n        lastFont = ctx.font;\n        ctx.font = info?.size\n          ? `${this.scale * info.size}px ${info.font}`\n          : info.font;\n      }\n\n      if (info.textAlign) {\n        lastTextAlign = ctx.textAlign;\n        ctx.textAlign = info.textAlign;\n      }\n\n      const offsetX = info.fixed ? 0 : this.offsetX;\n      const offsetY = info.fixed ? 0 : this.offsetY;\n\n      if (!info.strokeOnly) {\n        ctx.fillText(\n          text,\n          Math.ceil(this.scale * (x - offsetX)),\n          Math.ceil(this.scale * (y - offsetY))\n        );\n      }\n      if (info.stroked || info.strokeOnly) {\n        ctx.strokeText(\n          text,\n          Math.ceil(this.scale * (x - offsetX)),\n          Math.ceil(this.scale * (y - offsetY))\n        );\n      }\n\n      if (info.strokeStyle) {\n        ctx.strokeStyle = lastStrokeStyle;\n      }\n      if (info.fillStyle) {\n        ctx.fillStyle = lastFillStyle;\n      }\n\n      if (info.font) {\n        ctx.font = lastFont;\n      }\n\n      if (info.textAlign) {\n        ctx.textAlign = lastTextAlign;\n      }\n    }\n  }\n\n  public setOffset(x: number, y: number) {\n    this.offsetX = x;\n    this.offsetY = y;\n  }\n\n  public setSize(width: number = 0, height: number = 0) {\n    let nw: number, nh: number;\n    if (!width) {\n      nw = window.innerWidth;\n    } else {\n      nw = width;\n    }\n    if (!height) {\n      nh = window.innerHeight;\n    } else {\n      nh = height;\n    }\n    if (this.element.width !== nw) {\n      this.element.width = nw;\n    }\n    if (this.element.height !== nh) {\n      this.element.height = nh;\n    }\n  }\n}\n"]}