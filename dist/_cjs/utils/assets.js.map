{"version":3,"file":"assets.js","sourceRoot":"","sources":["../../../src/utils/assets.ts"],"names":[],"mappings":";;;AAEA,qDAA8C;AAE9C,MAAa,KAAK;IAGhB,YAAY,GAAW,EAAE,OAAsB,IAAI;QACjD,wBAAc,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QAC9B,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IACM,WAAW;QAChB,OAAO,wBAAc,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACtC,CAAC;CACF;AAXD,sBAWC;AAED,MAAa,MAAM;IAEjB;QACE,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;IACnB,CAAC;IACM,MAAM,CAAC,GAAW,EAAE,OAAsB,IAAI;QACnD,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACxB,OAAO,KAAK,CAAC;IACf,CAAC;IACM,YAAY,CAAC,MAAoB;QACtC,MAAM,MAAM,GAAY,EAAE,CAAC;QAC3B,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC3E,OAAO,MAAM,CAAC;IAChB,CAAC;IACM,GAAG,CAAC,IAAY;QACrB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC;IAClE,CAAC;IACM,QAAQ,CAAC,GAAW;QACzB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC;IAChE,CAAC;IACM,UAAU;QACf,OAAO,IAAI,OAAO,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;YAC9B,wBAAc,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAC5B,wBAAc,CAAC,aAAa,EAAE,CAAC;QACjC,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AA3BD,wBA2BC;AAED,MAAa,YAAY;IAMvB,YAAY,MAAc,EAAE,KAAY,EAAE,OAAe,QAAQ;QALzD,YAAO,GAAyB,IAAI,CAAC;QAGrC,SAAI,GAAW,QAAQ,CAAC;QAG9B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IAEM,UAAU;QACf,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QACrC,IAAI,GAAG,YAAY,gBAAgB,EAAE;YACnC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACjB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;aAC9D;YACD,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,OAAO,IAAI,CAAC,OAAO,CAAC;aACrB;iBAAM;gBACL,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;aAC3C;SACF;aAAM;YACL,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;SACxC;IACH,CAAC;CACF;AA3BD,oCA2BC","sourcesContent":["import { iJsonAsset } from \"../interfaces/assets\";\nimport { Canvas } from \"../shared/Canvas\";\nimport resourceLoader from \"./resourceLoader\";\n\nexport class Asset {\n  readonly url: string;\n  readonly name: string | null;\n  constructor(url: string, name: string | null = null) {\n    resourceLoader.addToLoad(url);\n    this.url = url;\n    this.name = name;\n  }\n  public getResource(): HTMLImageElement | Boolean {\n    return resourceLoader.get(this.url);\n  }\n}\n\nexport class Assets {\n  private assets: Asset[];\n  constructor() {\n    this.assets = [];\n  }\n  public create(url: string, name: string | null = null): Asset {\n    const asset = new Asset(url, name);\n    this.assets.push(asset);\n    return asset;\n  }\n  public createAssets(assets: iJsonAsset[]): Asset[] {\n    const result: Asset[] = [];\n    assets.forEach((asset) => result.push(this.create(asset.url, asset.name)));\n    return result;\n  }\n  public get(name: string): Asset | null {\n    return this.assets.find((asset) => asset.name === name) || null;\n  }\n  public getByUrl(url: string): Asset | null {\n    return this.assets.find((asset) => asset.url === url) || null;\n  }\n  public loadAssets() {\n    return new Promise((res, rej) => {\n      resourceLoader.onReady(res);\n      resourceLoader.loadResources();\n    });\n  }\n}\n\nexport class AssetPattern {\n  private pattern: CanvasPattern | null = null;\n  private canvas: Canvas;\n  private asset: Asset;\n  private type: string = \"repeat\";\n\n  constructor(canvas: Canvas, asset: Asset, type: string = \"repeat\") {\n    this.canvas = canvas;\n    this.asset = asset;\n    this.type = type;\n  }\n\n  public getPattern(): CanvasPattern {\n    const res = this.asset.getResource();\n    if (res instanceof HTMLImageElement) {\n      if (!this.pattern) {\n        this.pattern = this.canvas.ctx.createPattern(res, this.type);\n      }\n      if (this.pattern) {\n        return this.pattern;\n      } else {\n        throw new Error(\"Pattern is not created\");\n      }\n    } else {\n      throw new Error(\"Asset is not loaded\");\n    }\n  }\n}\n"]}